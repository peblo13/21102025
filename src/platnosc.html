<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P≈Çatno≈õƒá za plan ‚Ä¢ eCVjob.pl</title>
  <style>
    body { background: #0b0b0b; color: #e8ffe8; font-family: system-ui, Segoe UI, Roboto, sans-serif; margin: 0; }
    .wrap { max-width: 420px; margin: 8vh auto; padding: 32px; border: 1px solid #0a0; border-radius: 16px; background: rgba(0,0,0,.7); box-shadow: 0 0 32px #00ff0044; }
    h2 { color: #00ff00; text-align: center; margin-bottom: 24px; }
    .plan { font-size: 1.2em; color: #FFD700; font-weight: bold; text-align: center; margin-bottom: 18px; }
    .price { font-size: 1.5em; color: #00ff00; text-align: center; margin-bottom: 24px; }
    .pay-methods { display: flex; gap: 18px; justify-content: center; margin-bottom: 24px; }
    .pay-btn { padding: 14px 28px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; font-size: 1.1em; transition: background .2s; }
    .pay-btn.card { background: linear-gradient(45deg,#00ff00,#00ffaa); color: #000; }
    .pay-btn.card:hover { background: linear-gradient(45deg,#00ffaa,#00ff00); }
    .pay-btn.blik { background: linear-gradient(45deg,#FFD700,#FFA500); color: #000; }
    .pay-btn.blik:hover { background: linear-gradient(45deg,#FFA500,#FFD700); }
    .info { color: #ccc; text-align: center; margin-bottom: 18px; }
    .success { color: #00ff00; text-align: center; font-size: 1.2em; margin-top: 24px; }
    .back { display: block; text-align: center; margin-top: 24px; color: #00ff00; text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Wybierz metodƒô p≈Çatno≈õci</h2>
    <div class="plan" id="planName">Plan: ...</div>
    <div class="price" id="planPrice">Cena: ...</div>
    <div class="pay-methods">
      <button class="pay-btn card" onclick="pay('card')">üí≥ Karta</button>
      <button class="pay-btn blik" onclick="pay('blik')">üü¶ BLIK</button>
    </div>
    <div class="info">Po wybraniu metody zostaniesz poproszony o dane do p≈Çatno≈õci.<br>Symulacja demo ‚Äì p≈Çatno≈õƒá nie jest realizowana.</div>
    <div id="payResult"></div>
    <a href="moj-profil.html" class="back">‚Üê Powr√≥t do profilu</a>
  </div>
  <script>
    // Pobierz plan z URL
    function getParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name) || '';
    }
    const plan = getParam('plan');
    const planMap = {
      'Starter': { price: '14.99 z≈Ç/mies', icon: 'üöÄ' },
      'Premium': { price: '29.99 z≈Ç/mies', icon: '‚≠ê' },
      'Business': { price: '99.99 z≈Ç/mies', icon: 'üè¢' },
      'Enterprise': { price: '299.99 z≈Ç/mies', icon: 'üèÜ' },
      'Bezp≈Çatny': { price: '0 z≈Ç', icon: 'üÜì' }
    };
    document.getElementById('planName').textContent = (planMap[plan]?.icon || '') + ' ' + (plan ? 'Plan ' + plan : 'Nie wybrano planu');
    document.getElementById('planPrice').textContent = 'Cena: ' + (planMap[plan]?.price || '...');
    function pay(method) {
      if (method === 'card') {
        // Stripe Checkout: submit form to PHP backend
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = '../server/stripe_checkout.php';
        form.style.display = 'none';
        const planInput = document.createElement('input');
        planInput.type = 'hidden';
        planInput.name = 'plan';
        planInput.value = plan;
        form.appendChild(planInput);
        document.body.appendChild(form);
        form.submit();
      } else {
        // BLIK: demo only
        let methodName = 'BLIK';
        document.getElementById('payResult').innerHTML = `<div class='success'>‚úÖ P≈Çatno≈õƒá (${methodName}) zako≈Ñczona sukcesem!<br>Tw√≥j plan zosta≈Ç aktywowany.</div>`;
        setTimeout(() => { window.location.href = 'moj-profil.html'; }, 2500);
      }
    }
  </script>
</body>
</html>
